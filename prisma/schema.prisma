generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model categoria {
  name              String              @id @db.VarChar
  categoriaproducto categoriaproducto[]
}

model categoriaproducto {
  id_producto  Int
  id_categoria String    @db.VarChar
  categoria    categoria @relation(fields: [id_categoria], references: [name], onDelete: Cascade, onUpdate: NoAction)
  producto     producto  @relation(fields: [id_producto], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([id_producto, id_categoria])
}

model fabricante {
  id                 Int                  @id @default(autoincrement())
  name               String               @db.VarChar
  productofabricante productofabricante[]
}

model producto {
  id                 Int                  @id @default(autoincrement())
  name               String               @db.VarChar
  description        String?
  categoriaproducto  categoriaproducto[]
  productofabricante productofabricante[]
  usuarioproducto    usuarioproducto[]
}

model productofabricante {
  id_producto   Int
  id_fabricante Int
  fabricante    fabricante @relation(fields: [id_fabricante], references: [id], onDelete: Cascade, onUpdate: NoAction)
  producto      producto   @relation(fields: [id_producto], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([id_producto, id_fabricante])
}

model usuario {
  id              Int               @id @default(autoincrement())
  username        String            @db.VarChar
  created_at      DateTime          @default(now()) @db.Timestamp(6)
  usuarioproducto usuarioproducto[]
}

model usuarioproducto {
  id_usuario  Int
  id_producto Int
  producto    producto @relation(fields: [id_producto], references: [id], onDelete: Cascade, onUpdate: NoAction)
  usuario     usuario  @relation(fields: [id_usuario], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([id_usuario, id_producto])
}
